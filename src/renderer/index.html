<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>MSA Server Manager</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
<div id="app">
    <div class="header">
        <div class="header-title">
            <svg class="icon" viewBox="0 0 24 24">
                <path d="M4 1h16a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1m0 11h16a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1v-7a1 1 0 0 1 1-1M6 5h1v1H6V5m0 11h1v1H6v-1z"/>
            </svg>
            <span>MSA Server Manager</span>
        </div>
        <button class="icon-button" id="settings-btn">
            <svg viewBox="0 0 24 24">
                <path d="M12 15.5A3.5 3.5 0 0 1 8.5 12A3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5a3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97c0-.33-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1c0 .33.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.66Z"/>
            </svg>
        </button>
    </div>

    <div class="quick-actions">
        <button class="action-button primary" id="start-all-btn">
            <svg viewBox="0 0 24 24">
                <path d="M8 5v14l11-7z"/>
            </svg>
            Start All
        </button>
        <button class="action-button secondary" id="stop-all-btn">
            <svg viewBox="0 0 24 24">
                <path d="M6 6h12v12H6z"/>
            </svg>
            Stop All
        </button>
        <button class="action-button danger" id="clear-all-btn">
            <svg viewBox="0 0 24 24">
                <path d="M19 4h-3.5l-1-1h-5l-1 1H5v2h14V4zM6 19a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7H6v12z"/>
            </svg>
            Clear All
        </button>
    </div>

    <div class="server-list" id="server-list">
        <!-- Server items will be dynamically added here -->
    </div>

    <div class="status-bar">
        <span id="status-text">Loading servers...</span>
    </div>
</div>

<!-- Server Detail Modal -->
<div id="server-detail" class="modal hidden">
    <div class="modal-content">
        <div class="modal-header">
            <h2 id="detail-server-name">Server Name</h2>
            <button class="close-button" id="close-detail">×</button>
        </div>
        <div class="modal-body">
            <div class="detail-section">
                <h3>Configuration</h3>
                <div class="info-grid">
                    <div class="info-row">
                        <span class="info-label">Path:</span>
                        <span id="detail-path" class="info-value"></span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Script:</span>
                        <span id="detail-script" class="info-value"></span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Port:</span>
                        <span id="detail-port" class="info-value"></span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">PID:</span>
                        <span id="detail-pid" class="info-value"></span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Uptime:</span>
                        <span id="detail-uptime" class="info-value"></span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">CPU:</span>
                        <span id="detail-cpu" class="info-value"></span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Memory:</span>
                        <span id="detail-memory" class="info-value"></span>
                    </div>
                </div>
            </div>

            <div class="detail-actions">
                <button class="action-button" id="open-browser-btn">
                    <svg viewBox="0 0 24 24">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
                    </svg>
                    Open in Browser
                </button>
                <button class="action-button" id="open-terminal-btn">
                    <svg viewBox="0 0 24 24">
                        <path d="M20 19V7H4v12h16m0-16a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h16m-7 14v-2h5v2h-5m-3.42-4L5.57 9l1.41-1.41L11.4 12l-4.42 4.42L5.57 13z"/>
                    </svg>
                    Open Terminal
                </button>
            </div>

            <div class="detail-section">
                <h3>Logs</h3>
                <div class="log-container" id="log-container">
                    <!-- Logs will be dynamically added here -->
                </div>
            </div>
        </div>
    </div>
</div>

<script src="renderer.js"></script>

<!-- Settings Modal -->
<div id="settings-modal" class="modal hidden">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Settings</h2>
            <button class="close-button" id="close-settings">×</button>
        </div>
        <div class="modal-body">
            <div class="settings-form">
                <div class="form-group preset-group">
                    <label for="preset-select">Configuration Preset</label>
                    <div class="input-group">
                        <select id="preset-select">
                            <option value="">Select a preset</option>
                        </select>
                        <button id="delete-preset-btn" class="small-icon-button" title="Delete selected preset">
                            <svg viewBox="0 0 24 24"><path d="M19 4h-3.5l-1-1h-5l-1 1H5v2h14V4zM6 19a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7H6v12z"/></svg>
                        </button>
                    </div>
                </div>
                <div class="form-group">
                    <label for="root-path">Projects Root Folder</label>
                    <div class="input-group">
                        <input type="text" id="root-path" readonly placeholder="Select a folder...">
                        <button id="browse-btn">Browse</button>
                    </div>
                </div>
                <div class="form-group">
                    <label for="run-command">Server Run Command</label>
                    <input type="text" id="run-command" placeholder="e.g., npm start">
                </div>
            </div>
            <div class="modal-actions">
                <button class="action-button" id="save-preset-btn">Save as Preset</button>
                <button class="action-button" id="cancel-settings-btn">Cancel</button>
                <button class="action-button primary" id="save-settings-btn">Apply</button>
            </div>
        </div>
    </div>
</div>

<!-- Add Server Modal -->
<div id="add-server-modal" class="modal hidden">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Add Server</h2>
            <button class="close-button" id="close-add-server">×</button>
        </div>
        <div class="modal-body">
            <div class="settings-form">
                <div class="form-group">
                    <label for="server-name">Server Name</label>
                    <input type="text" id="server-name" placeholder="e.g., My API Server">
                </div>
                <div class="form-group">
                    <label for="server-path">Project Path</label>
                    <div class="input-group">
                        <input type="text" id="server-path" readonly placeholder="Select project folder...">
                        <button id="browse-server-path-btn">Browse</button>
                    </div>
                </div>
                <div class="form-group">
                    <label for="server-command">Run Command</label>
                    <input type="text" id="server-command" placeholder="e.g., npm start, node index.js">
                </div>
                <div class="form-group">
                    <label for="server-port">Port (Optional)</label>
                    <input type="number" id="server-port" placeholder="e.g., 3000" min="1000" max="65535">
                </div>
            </div>
            <div class="modal-actions">
                <button class="action-button" id="cancel-add-server-btn">Cancel</button>
                <button class="action-button primary" id="save-add-server-btn">Add Server</button>
            </div>
        </div>
    </div>
</div>
</body>
</html>