<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>GUI Process Manager</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
<div id="app">
    <div class="header">
        <div class="header-title">
            <svg class="icon" viewBox="0 0 24 24">
                <path d="M4 1h16a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1m0 11h16a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1v-7a1 1 0 0 1 1-1M6 5h1v1H6V5m0 11h1v1H6v-1z"/>
            </svg>
            <span>GUI Process Manager</span>
        </div>
<!--        <button class="icon-button" id="settings-btn" title="Settings">-->
<!--            <svg class="icon" viewBox="0 0 24 24">-->
<!--                <path d="M12,8A4,4 0 0,0 8,12A4,4 0 0,0 12,16A4,4 0 0,0 16,12A4,4 0 0,0 12,8M4.93,12.5C4.9,12.34 4.88,12.17 4.88,12C4.88,11.83 4.9,11.66 4.93,11.5L3.23,10.13C3.08,10 3.04,9.78 3.14,9.6L4.74,6.8C4.84,6.62 5.05,6.55 5.24,6.62L7.24,7.42C7.61,7.13 8,6.88 8.44,6.68L8.74,4.56C8.77,4.36 8.94,4.22 9.14,4.22H14.86C15.06,4.22 15.23,4.36 15.26,4.56L15.56,6.68C16,6.88 16.39,7.13 16.76,7.42L18.76,6.62C18.95,6.55 19.16,6.62 19.26,6.8L20.86,9.6C20.96,9.78 20.92,10 20.77,10.13L19.07,11.5C19.1,11.66 19.12,11.83 19.12,12C19.12,12.17 19.1,12.34 19.07,12.5L20.77,13.87C20.92,14 20.96,14.22 20.86,14.4L19.26,17.2C19.16,17.38 18.95,17.45 18.76,17.38L16.76,16.58C16.39,16.87 16,17.12 15.56,17.32L15.26,19.44C15.23,19.64 15.06,19.78 14.86,19.78H9.14C8.94,19.78 8.77,19.64 8.74,19.44L8.44,17.32C8,17.12 7.61,16.87 7.24,16.58L5.24,17.38C5.05,17.45 4.84,17.38 4.74,17.2L3.14,14.4C3.04,14.22 3.08,14 3.23,13.87L4.93,12.5Z"/>-->
<!--            </svg>-->
<!--        </button>-->
    </div>

    <div class="quick-actions">
        <button class="action-button primary" id="start-all-btn">
            <svg viewBox="0 0 24 24">
                <path d="M8 5v14l11-7z"/>
            </svg>
            Start All
        </button>
        <button class="action-button secondary" id="stop-all-btn">
            <svg viewBox="0 0 24 24">
                <path d="M6 6h12v12H6z"/>
            </svg>
            Stop All
        </button>
<!--        <button class="action-button danger" id="clear-all-btn">-->
<!--            <svg viewBox="0 0 24 24">-->
<!--                <path d="M19 4h-3.5l-1-1h-5l-1 1H5v2h14V4zM6 19a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7H6v12z"/>-->
<!--            </svg>-->
<!--            Clear All-->
<!--        </button>-->
    </div>

    <div class="server-list" id="server-list">
        <!-- Server items will be dynamically added here -->
    </div>

    <div class="status-bar">
        <span id="status-text" class="status-left">Loading servers...</span>
        <span class="status-credit">developed by @gyus</span>
    </div>
</div>

<!-- Server Detail Modal -->
<div id="server-detail" class="modal hidden">
    <div class="modal-content">
        <div class="modal-header">
            <h2 id="detail-server-name">Server Name</h2>
            <button class="close-button" id="close-detail">√ó</button>
        </div>
        <div class="modal-body">
            <div class="detail-section">
                <div class="detail-header">
                    <h3>Configuration</h3>
                </div>
                
                <!-- Individual field editing view -->
                <div id="detail-view" class="info-grid">
                    <!-- Editable Name Field -->
                    <div class="info-row editable-field">
                        <span class="info-label">Name:</span>
                        <div class="editable-value" id="name-field">
                            <span id="detail-name" class="info-value"></span>
                            <button class="edit-field-btn" data-field="name" title="Edit Name">
                                <svg viewBox="0 0 24 24"><path d="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"/></svg>
                            </button>
                            <div class="edit-controls" style="display: none;">
                                <input type="text" class="field-input" id="edit-name-input" placeholder="Server name">
                                <button class="save-field-btn" data-field="name" title="Save">
                                    <svg viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/></svg>
                                </button>
                                <button class="cancel-field-btn" data-field="name" title="Cancel">
                                    <svg viewBox="0 0 24 24"><path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"/></svg>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Editable Path Field -->
                    <div class="info-row editable-field">
                        <span class="info-label">Path:</span>
                        <div class="editable-value" id="path-field">
                            <span id="detail-path" class="info-value"></span>
                            <button class="edit-field-btn" data-field="path" title="Edit Path">
                                <svg viewBox="0 0 24 24"><path d="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"/></svg>
                            </button>
                            <div class="edit-controls" style="display: none;">
                                <div class="input-group">
                                    <input type="text" class="field-input" id="edit-path-input" readonly placeholder="Select project folder...">
                                    <button class="browse-btn" data-field="path" title="Browse">üìÅ</button>
                                </div>
                                <button class="save-field-btn" data-field="path" title="Save">
                                    <svg viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/></svg>
                                </button>
                                <button class="cancel-field-btn" data-field="path" title="Cancel">
                                    <svg viewBox="0 0 24 24"><path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"/></svg>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Editable Command Field -->
                    <div class="info-row editable-field">
                        <span class="info-label">Command:</span>
                        <div class="editable-value" id="command-field">
                            <span id="detail-script" class="info-value"></span>
                            <button class="edit-field-btn" data-field="command" title="Edit Command">
                                <svg viewBox="0 0 24 24"><path d="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"/></svg>
                            </button>
                            <div class="edit-controls" style="display: none;">
                                <input type="text" class="field-input" id="edit-command-input" placeholder="e.g., npm start, node index.js">
                                <button class="save-field-btn" data-field="command" title="Save">
                                    <svg viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/></svg>
                                </button>
                                <button class="cancel-field-btn" data-field="command" title="Cancel">
                                    <svg viewBox="0 0 24 24"><path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"/></svg>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Port Field (Auto-detected) -->
                    <div class="info-row">
                        <span class="info-label">Port:</span>
                        <div class="editable-value">
                            <span id="detail-actual-port" class="info-value status-running"></span>
                        </div>
                    </div>
                    
                    <!-- Read-only fields -->
                    <div class="info-row">
                        <span class="info-label">PID:</span>
                        <span id="detail-pid" class="info-value"></span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Uptime:</span>
                        <span id="detail-uptime" class="info-value"></span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">CPU:</span>
                        <span id="detail-cpu" class="info-value"></span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Memory:</span>
                        <span id="detail-memory" class="info-value"></span>
                    </div>
                </div>

            <div class="detail-actions">
                <button class="action-button" id="open-browser-btn">
                    <svg viewBox="0 0 24 24">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
                    </svg>
                    Open in Browser
                </button>
                <button class="action-button" id="open-terminal-btn">
                    <svg viewBox="0 0 24 24">
                        <path d="M20 19V7H4v12h16m0-16a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h16m-7 14v-2h5v2h-5m-3.42-4L5.57 9l1.41-1.41L11.4 12l-4.42 4.42L5.57 13z"/>
                    </svg>
                    Open path in Terminal
                </button>
            </div>

            <div class="detail-section">
                <h3>Logs</h3>
                <div class="log-container" id="log-container">
                    <!-- Logs will be dynamically added here -->
                </div>
            </div>
        </div>
    </div>
</div>

<script src="renderer.js"></script>

<!-- Settings Modal -->
<div id="settings-modal" class="modal hidden">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Settings</h2>
            <button class="close-button" id="close-settings">√ó</button>
        </div>
        <div class="modal-body">
            <div class="settings-form">
                <div class="form-group preset-group">
                    <label for="preset-select">Configuration Preset</label>
                    <div class="input-group">
                        <select id="preset-select">
                            <option value="">Select a preset</option>
                        </select>
                        <button id="delete-preset-btn" class="small-icon-button" title="Delete selected preset">
                            <svg viewBox="0 0 24 24"><path d="M19 4h-3.5l-1-1h-5l-1 1H5v2h14V4zM6 19a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7H6v12z"/></svg>
                        </button>
                    </div>
                </div>
                <div class="form-group">
                    <label for="root-path">Projects Root Folder</label>
                    <div class="input-group">
                        <input type="text" id="root-path" readonly placeholder="Select a folder...">
                        <button id="browse-btn">Browse</button>
                    </div>
                </div>
                <div class="form-group">
                    <label for="run-command">Server Run Command</label>
                    <input type="text" id="run-command" placeholder="e.g., npm start">
                </div>
                
                <div class="settings-section">
                    <h3>Node.js Configuration</h3>
                    <div class="form-group">
                        <label for="node-path">Node.js Path</label>
                        <div class="input-group">
                            <input type="text" id="node-path" placeholder="Path to node executable">
                            <button id="browse-node-btn" class="small-icon-button" title="Browse for node executable">
                                <svg viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6m-1 1.5L18.5 9H13V3.5z"/></svg>
                            </button>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="npm-path">NPM Path</label>
                        <div class="input-group">
                            <input type="text" id="npm-path" placeholder="Path to npm executable">
                            <button id="browse-npm-btn" class="small-icon-button" title="Browse for npm executable">
                                <svg viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6m-1 1.5L18.5 9H13V3.5z"/></svg>
                            </button>
                        </div>
                    </div>
                    <div class="form-group">
                        <button id="detect-paths-btn" class="action-button secondary">Auto-detect Paths</button>
                    </div>
                </div>
            </div>
            <div class="modal-actions">
                <button class="action-button" id="save-preset-btn">Save as Preset</button>
                <button class="action-button" id="cancel-settings-btn">Cancel</button>
                <button class="action-button primary" id="save-settings-btn">Apply</button>
            </div>
        </div>
    </div>
</div>

<!-- Add Server Modal -->
<div id="add-server-modal" class="modal hidden">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Add Server</h2>
            <button class="close-button" id="close-add-server">√ó</button>
        </div>
        <div class="modal-body">
            <div class="settings-form">
                <div class="form-group">
                    <label for="server-name">Server Name</label>
                    <input type="text" id="server-name" placeholder="e.g., My API Server">
                </div>
                <div class="form-group">
                    <label for="server-path">Project Path</label>
                    <div class="input-group">
                        <input type="text" id="server-path" readonly placeholder="Select project folder...">
                        <button id="browse-server-path-btn">Browse</button>
                    </div>
                </div>
                <div class="form-group">
                    <label for="server-command">Run Command</label>
                    <input type="text" id="server-command" placeholder="e.g., npm start, node index.js">
                </div>
            </div>
            <div class="modal-actions">
                <button class="action-button" id="cancel-add-server-btn">Cancel</button>
                <button class="action-button primary" id="save-add-server-btn">Add Server</button>
            </div>
        </div>
    </div>
</div>
</body>
</html>
